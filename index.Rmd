---
title       : Analysis of IRIS dataset 
subtitle    : Coursera Data Products Project
author      : Shami Gupta
job         : 
logo        : Predire_Logo.jpg
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     :               # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
css         : 
knit        : slidify::knit2slides

---
## Introduction 

 - Iris data set gives the measurements in centimeters of the variables sepal length and width and petal length and width, respectively, for 50 flowers from each of 3 species of iris.
  - The species are Iris setosa, versicolor, and virginica.
  - This R-shiny application helps to analyse the data and predict Species for new set of measurements 
  - The application is built and hosted on shinyapps.io site.

The shiny app (https://shamigupta.shinyapps.io/CaseStudy2) built will help us perform 3 tasks:

  - Analyse the correlation between the pairs of measurements using a scatter plot.
  - A model is built on this dataset using decision trees - to provide an graphical diagram of the leaves and the nodes.
  - User interface to specify a combination of the parameter on which the model predicts the name of the Species dynamically


--- .smallcode 
## Correlation between measurements

  - Analysing the correlation between measurements will help us visualize how the data gets clustered for each of the species.
  
```{r echo=FALSE, fig.height=5.5, fig.width=12, fig.align='center'}
library(ggplot2)
ggplot(iris,aes_string(x="Sepal.Length",y="Sepal.Width", colour="Species")) + geom_point(size=2) +
      geom_smooth(method="lm") +
      xlab("Sepal.Length") +  ylab("Sepal.Length") + 
      ggtitle("Iris - Sepal.Length vs Sepal.Width") +
      facet_grid(. ~ Species)
```
  - Above scatter plot shows how Sepal.Length and Sepal.Width are correlated against each of the species.
    
  - Similar plots can be tried out using the shiny app, for all possible combinations to understand how pairs of variable can be used to discriminate Species.



---
## Building the Prediction Model - The Decision Tree 

  - A decision tree model is shown in two forms - the normal and the fancy plot (user choses either)

  - The model is represented diagramatically for study based upon the iris dataset

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width=6.7, fig.height=5.5, out.extra='style="float:left"'}
library(caret)
library(rattle)
data(iris)
modFit= train(Species~., method="rpart", data=iris)
fancyRpartPlot(modFit$finalModel,sub="")
```

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width=6.7, fig.height=6, out.extra='style="float:right"'}
plot(modFit$finalModel, uniform=TRUE, main="")
text(modFit$finalModel, use.n=TRUE, all=TRUE, cex=.7)
```

**Note**

Due to issues with RGTk2, rattle did not get loaded to the shinyapps. The fancy plot (on the left) as shown in shinyapps is a picture generated by the local run


--- .codefont .outfont .codemargin .outmargin .nobackground .slidify
## Predicting the species
  - The shiny application predicts the species from the predictor paramters - sepal length and width and petal length and width, respectively. The model works as following - 
  - Fitting the parameters to the model as predictors - Split the iris data in 60:40 ratio between train and test
  - Use the train data to tune the Decision Tree Model
  - Use the splitted test data to predict the Species
  - Confusion Matrix - Predicted Species vs Test Species - Accuracy is 95% ie Margin of error is 5%
```{r echo=FALSE, message=FALSE, fig.height=4, fig.width=10, fig.align='center',results='markup'}
library(caret)
set.seed(34325)
inTrain <- createDataPartition(y=iris$Species, p=0.6, list=FALSE)
training <- iris[inTrain,]
testing <- iris[-inTrain,]
modFit <- train(Species ~ .,method="rpart",data=training)
ptesting <- predict(modFit,newdata=testing)
print(confusionMatrix(ptesting, testing$Species))
```
